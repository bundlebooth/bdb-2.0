<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom Bundle Builder</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f3f4f6; margin: 0; padding: 0; }
    .step-header { font-weight: bold; color: #2563eb; }
    .hidden { display: none; }
    .step { transition: all 0.3s ease-in-out; }
    .btn { padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; }
    .btn-blue { background: #2563eb; color: white; }
    .btn-gray { background: #d1d5db; }
    .btn-red { background: #ef4444; color: white; }
    .btn-green { background: #10b981; color: white; }
    .card { border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 0.5rem; background: white; }
    .form-select, .form-input { width: 100%; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #d1d5db; border-radius: 0.25rem; }
    .grid-cols-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }
  </style>
</head>
<body>
  <div id="app" class="max-w-4xl mx-auto bg-white shadow-lg p-6 mt-10 rounded-xl">
    <h1 class="text-2xl font-bold mb-4">Create Your Custom Bundle</h1>

    <div id="step-indicator" class="mb-4">
      <div class="step-header">Step <span id="step-num">1</span>: <span id="step-title">Choose Services</span></div>
    </div>

    <div id="step-1" class="step">
      <div id="services-list" class="grid-cols-2"></div>
    </div>

    <div id="step-2" class="step hidden">
      <div class="mb-4" id="guest-size-container"></div>
      <div id="adjustments"></div>
    </div>

    <div id="step-3" class="step hidden">
      <ul id="summary-list" class="mb-4"></ul>
      <div class="font-bold text-xl">Total: $<span id="total">0</span></div>
      <button class="btn btn-green mt-4">Book Now</button>
    </div>

    <div class="flex justify-between mt-6">
      <button id="back-btn" class="btn btn-gray" disabled>Back</button>
      <button id="next-btn" class="btn btn-blue">Next</button>
      <button id="clear-btn" class="btn btn-red">Clear</button>
    </div>
  </div>

  <script>
    const services = [
      { name: "Photo Booth", options: { "Digital Only": 500, "Unlimited Prints": 600 } },
      { name: "360 Video Booth", prices: { flat: 600 } },
      { name: "Audio Guest Book", prices: { flat: 350 } },
      { name: "Magazine Photo Booth", prices: { flat: 600 } },
      { name: "Espresso & Coffee Booth", prices: { 50: 700, 100: 1100, 150: 1500, 200: 1900 }, guestBased: true },
      { name: "Waffle Booth", prices: { 50: 800, 100: 1200, 150: 1600, 200: 2000 }, guestBased: true },
      { name: "Smoothies Booth", prices: { 50: 900, 100: 1300, 150: 1700, 200: 2100 }, guestBased: true },
      { name: "Sparkler Boxes", options: { "2 Sparklers": 400, "4 Sparklers": 600, "6 Sparklers": 800 } },
      { name: "Dry Ice Fog", prices: { flat: 400 } },
      { name: "Laser First Dance", prices: { flat: 900 } }
    ];

    let currentStep = 1;
    let selectedServices = [];
    let adjustments = {};
    let guestCount = 50;

    const stepTitle = document.getElementById("step-title");
    const stepNum = document.getElementById("step-num");
    const step1 = document.getElementById("step-1");
    const step2 = document.getElementById("step-2");
    const step3 = document.getElementById("step-3");
    const servicesList = document.getElementById("services-list");
    const adjustmentsDiv = document.getElementById("adjustments");
    const guestSizeContainer = document.getElementById("guest-size-container");
    const summaryList = document.getElementById("summary-list");
    const totalDisplay = document.getElementById("total");

    function renderServices() {
      servicesList.innerHTML = "";
      services.forEach(service => {
        const card = document.createElement("label");
        card.className = "card flex items-center space-x-2";
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = service.name;
        checkbox.onchange = () => {
          if (checkbox.checked) selectedServices.push(service.name);
          else selectedServices = selectedServices.filter(s => s !== service.name);
        };
        card.appendChild(checkbox);
        const text = document.createElement("span");
        text.textContent = service.name;
        card.appendChild(text);
        servicesList.appendChild(card);
      });
    }

    function renderAdjustments() {
      adjustmentsDiv.innerHTML = "";
      guestSizeContainer.innerHTML = "";

      const needsGuestInput = selectedServices.some(name => {
        const service = services.find(s => s.name === name);
        return service.guestBased;
      });

      if (needsGuestInput) {
        const guestDiv = document.createElement("div");
        guestDiv.className = "mb-4";
        guestDiv.innerHTML = `
          <label class="block font-semibold">Guest Size</label>
          <select id="guest-size" class="form-select">
            <option value="50">50 Guests</option>
            <option value="100">100 Guests</option>
            <option value="150">150 Guests</option>
            <option value="200">200 Guests</option>
          </select>
        `;
        guestSizeContainer.appendChild(guestDiv);

        guestDiv.querySelector("select").value = guestCount;
        guestDiv.querySelector("select").onchange = (e) => {
          guestCount = parseInt(e.target.value);
          renderAdjustments();
        };
      }

      selectedServices.forEach(serviceName => {
        const service = services.find(s => s.name === serviceName);
        const container = document.createElement("div");
        container.className = "mb-4";
        const label = document.createElement("div");
        label.className = "font-semibold";
        label.textContent = service.name;
        container.appendChild(label);

        if (service.options) {
          const select = document.createElement("select");
          select.className = "form-select";
          for (let [option, value] of Object.entries(service.options)) {
            const opt = document.createElement("option");
            opt.value = value;
            opt.textContent = `${option} - $${value}`;
            select.appendChild(opt);
          }
          select.onchange = () => {
            adjustments[service.name] = parseInt(select.value);
            renderSummary();
          };
          select.dispatchEvent(new Event('change'));
          container.appendChild(select);
        } else if (service.prices && service.prices.flat) {
          adjustments[service.name] = service.prices.flat;
          container.appendChild(document.createTextNode(`$${service.prices.flat}`));
        } else if (service.guestBased && service.prices[guestCount]) {
          adjustments[service.name] = service.prices[guestCount];
          container.appendChild(document.createTextNode(`${guestCount} Guests - $${service.prices[guestCount]}`));
        }

        adjustmentsDiv.appendChild(container);
      });
    }

    function renderSummary() {
      summaryList.innerHTML = "";
      let total = 0;
      selectedServices.forEach(name => {
        const li = document.createElement("li");
        const price = adjustments[name] || 0;
        li.textContent = `${name}: $${price}`;
        total += price;
        summaryList.appendChild(li);
      });
      totalDisplay.textContent = total;
    }

    document.getElementById("next-btn").onclick = () => {
      if (currentStep === 1) renderAdjustments();
      if (currentStep === 2) renderSummary();
      currentStep++;
      updateSteps();
    };

    document.getElementById("back-btn").onclick = () => {
      currentStep--;
      updateSteps();
    };

    document.getElementById("clear-btn").onclick = () => {
      currentStep = 1;
      selectedServices = [];
      adjustments = {};
      guestCount = 50;
      renderServices();
      updateSteps();
    };

    function updateSteps() {
      step1.classList.add("hidden");
      step2.classList.add("hidden");
      step3.classList.add("hidden");
      document.getElementById("back-btn").disabled = currentStep === 1;
      document.getElementById("next-btn").style.display = currentStep === 3 ? "none" : "inline-block";

      if (currentStep === 1) {
        step1.classList.remove("hidden");
        stepTitle.textContent = "Choose Services";
      } else if (currentStep === 2) {
        step2.classList.remove("hidden");
        stepTitle.textContent = "Adjust Factors";
      } else if (currentStep === 3) {
        step3.classList.remove("hidden");
        stepTitle.textContent = "Review & Book";
      }
      stepNum.textContent = currentStep;
    }

    renderServices();
  </script>
</body>
</html>
